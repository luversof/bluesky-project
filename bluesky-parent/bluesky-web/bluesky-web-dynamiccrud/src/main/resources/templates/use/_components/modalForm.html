<form id="modalForm"
	data-th-with="
		map = ${T(java.util.Map)},
		thymeleafUtil = ${T(net.luversof.web.dynamiccrud.thymeleaf.util.ThymeleafUtil)},
		dbFieldList = ${dbFieldList},
		dbFieldColumnType = ${T(net.luversof.web.dynamiccrud.setting.domain.DbFieldColumnType)}"
	data-th-hx-post="@{${thymeleafUtil.getUrl('FRAGMENT_MODAL_FORM',map.of('modalMode',modalMode))}}"
	hx-target="#fragmentArea"
>
	<th-block data-th-each="dbField : ${dbFieldList}">
		
		<!--/*-->
		편집 가능한 경우 form 화면 처리
		아닌 경우 hidden input으로 처리하여 값을 전달
		<!--*/-->
		
		<div class="join w-full m-1" data-th-if="${dbField.isEnableEdit(modalMode)}">
			<div class="btn btn-sm join-item w-1/3" 
				data-th-text="${dbField.columnName}"
				data-th-classappend="${dbField.isEnableEditRequired(modalMode) ? 'required' : ''}">
			</div>
			
			<!--/*-->
			preset이 있는 경우 preset 기준 select를 구성
			없으면 그 다음 분기를 고려
			<!--*/-->
			
			<th-block data-th-if="${#strings.isEmpty(dbField.columnPreset)}">
				<!--/*-->
				preset이 없는 경우 Field의 type에 따라 input을 설정
				type : boolean, date, int, lonk, long, string, text
				<!--*/-->
				
				<th-block data-th-switch="${dbField.columnType}">
					
					<th-block data-th-case="${dbFieldColumnType.BOOLEAN}">
						<input type="checkbox" class="toggle toggle-lg toggle-info ml-2" />
						<input type="hidden" data-th-name="${dbField.columnId}" value="false" />
					</th-block>
					<th-block data-th-case="${dbFieldColumnType.INT}">
						<input type="number" class="input input-sm input-bordered join-item w-full"
							 data-th-name="${dbField.columnId}"
							 data-th-required="${dbField.isEnableEditRequired(modalMode)}"
							 data-th-placeholder="${dbField.formPlaceholder}"
						/>
					</th-block>
					<th-block data-th-case="${dbFieldColumnType.TEXT}">
						<textarea class="textarea textarea-sm textarea-bordered join-item w-full h-40"
							 data-th-name="${dbField.columnId}"
							 data-th-required="${dbField.isEnableEditRequired(modalMode)}"
							 data-th-placeholder="${dbField.formPlaceholder}"
							 data-th-maxlength="${dbField.columnLength <= 0 ? 524288 : dbField.columnLength}"
						></textarea>
					</th-block>
					<th-block data-th-case="*">
						<input type="text" class="input input-sm input-bordered join-item w-full"
							 data-th-name="${dbField.columnId}"
							 data-th-required="${dbField.isEnableEditRequired(modalMode)}"
							 data-th-placeholder="${dbField.formPlaceholder}"
							 data-th-maxlength="${dbField.columnLength <= 0 ? 524288 : dbField.columnLength}"
						/>
					</th-block>
					
				</th-block>
			</th-block>
			
			<th-block data-th-unless="${#strings.isEmpty(dbField.columnPreset)}">
				<select class="select select-sm select-bordered join-item w-full"
					data-th-name="${dbField.columnId}"
					data-th-required="${dbField.isEnableEditRequired(modalMode)}"
				>
					<option data-th-text="${dbField.columnName}" value="" />
					<option 
						data-th-each="presetPart : ${#strings.listSplit(dbField.columnPreset,'|')}" 
						data-th-value="${#strings.contains(presetPart, ',')? #strings.arraySplit(presetPart, ',')[0] : presetPart}" 
						data-th-text="${#strings.contains(presetPart, ',')? #strings.arraySplit(presetPart, ',')[1] : presetPart}"
					/>
				</select>
			</th-block>
			
			<button data-th-if="${!#strings.isEmpty(dbField.formHelpText)}" class="btn btn-sm btn-ghost join-item tooltip tooltip-left" data-th-data-tip="${dbField.formHelpText}" onclick="return false;">
				<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
					<path stroke-linecap="round" stroke-linejoin="round" d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z" />
				</svg>
			</button>
		</div>
		<th-block data-th-unless="${dbField.isEnableEdit(modalMode)}">
			<input type="hidden" data-th-name="${dbField.columnId}" />
		</th-block>
		
		
	</th-block>
	
	<input type="hidden"
		data-th-each="dbField : ${dbFieldList}"
		data-th-if="${dbField.isEnableEdit(modalMode)}"
		data-th-name="'\_\_org\_\_' + ${dbField.columnId}"
	/>
</form>